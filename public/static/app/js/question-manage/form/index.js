webpackJsonp(["app/js/question-manage/form/index"],{0:function(e,t){e.exports=jQuery},"228720083c8f03b23e6d":function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a("fed3b995e613c074e80b"),s=function(e){return e&&e.__esModule?e:{default:e}}(u);jQuery.validator.addMethod("fillCheck",function(e,t){return this.optional(t)||/(\[\[(.+?)\]\])/i.test(e)},Translator.trans("course.question.create.fill_hint"));var l=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.titleEditorToolBarName="Question",a.initTitleEditor(a.validator),a.initAnalysisEditor(),a.$titleField=$("#"+a.titleFieldId),a.init(),a}return r(t,e),i(t,[{key:"init",value:function(){this.$titleField.rules("add",{fillCheck:!0})}}]),t}(s.default);t.default=l},"2cf47b8094e4851a7f1f":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a("fed3b995e613c074e80b"),l=n(s),c=a("5fdcf1aea784583ca083"),f=n(c),d=a("33a776824bec073629e5"),p=n(d),h=a("b13eefde5dd7af09b834"),b=n(h),m=a("ae88c18278ce1387fd20"),y=n(m),v=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.isSubmit=!1,a.$submit=null,a.$questionOptions=$("#question-options"),a.dataSource=a.$questionOptions.data("choices"),a.dataAnswer=a.$questionOptions.data("answer"),a.dataSource?(a.dataSource=JSON.parse(a.dataSource),a.dataAnswer=JSON.parse(a.dataAnswer)):(a.dataSource=[],a.dataAnswer=[]),a.imageUploadUrl=a.$questionOptions.data("imageUploadUrl"),a.imageDownloadUrl=a.$questionOptions.data("imageDownloadUrl"),a.initTitleEditor(a.validator),a.initAnalysisEditor(),a.initOptions(),a.subscriptionMessage(),a}return i(t,e),u(t,[{key:"_initEvent",value:function(){var e=this;this.$form.on("click","[data-role=submit]",function(t){return e.submitForm(t)})}},{key:"submitForm",value:function(e){this.$submit=$(e.currentTarget);var t=this.$submit.data("submission");this.$form.find("[name=submission]").val(t),this.validator.form()&&this.isSubmit&&this.submit(),this.isSubmit||this.publishMessage()}},{key:"submit",value:function(){this.$submit.button("loading"),this.$form.submit()}},{key:"initOptions",value:function(){f.default.render(p.default.createElement(b.default,{imageUploadUrl:this.imageUploadUrl,imageDownloadUrl:this.imageDownloadUrl,dataSource:this.dataSource,dataAnswer:this.dataAnswer,minCheckedNum:2}),document.getElementById("question-options"))}},{key:"publishMessage",value:function(){y.default.publish({channel:"manage-question",topic:"question-create-form-validator-start",data:{isValidator:!0}})}},{key:"subscriptionMessage",value:function(){var e=this;y.default.subscribe({channel:"manage-question",topic:"question-create-form-validator-end",callback:function(t,a){e.isSubmit=t.isValidator,e.isSubmit&&e.validator.form()&&e.submit()}})}}]),t}(l.default);t.default=v},"3c1fcf442037b440aea5":function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a("fed3b995e613c074e80b"),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.initTitleEditor(a.validator),a.initAnalysisEditor(),a.$answerField=$('[name="answer[]"]'),a.init(),a}return r(t,e),i(t,[{key:"init",value:function(){this.$answerField.rules("add",{required:!0,messages:{required:Translator.trans("course.question.create.right_answer_required_error_hint")}})}}]),t}(s.default);t.default=l},"56f8edb912e68ea9e223":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a("fed3b995e613c074e80b"),u=n(i),s=a("2cf47b8094e4851a7f1f"),l=n(s),c=a("e85a87f5cf404e5d12c1"),f=n(c),d=a("5a8ff9f4ed340a8713f6"),p=n(d),h=a("3c1fcf442037b440aea5"),b=n(h),m=a("228720083c8f03b23e6d"),y=n(m),v=a("7fed9bfb1a62b2d3ee74"),g=n(v),_=a("d10d1a490b8cc019f3a3"),w=n(_),O=a("1be2a74362f00ba903a0"),k=n(O),E=function(){function e(){o(this,e)}return r(e,null,[{key:"getCreator",value:function(t,a){switch(t){case"single_choice":e=new f.default(a);break;case"uncertain_choice":e=new p.default(a);break;case"choice":e=new l.default(a);break;case"determine":e=new b.default(a);break;case"essay":e=new g.default(a);break;case"fill":e=new y.default(a);break;case"material":e=new w.default(a);break;default:e=new u.default(a),e.initTitleEditor(),e.initAnalysisEditor()}return e}}]),e}(),j=$('[data-role="question-form"]'),T=$('[data-role="question-form"]').find('[name="type"]').val();E.getCreator(T,j),new k.default($('[data-role="courseId"]'),$('[data-role="lessonId"]'))},"5a8ff9f4ed340a8713f6":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a("2cf47b8094e4851a7f1f"),l=n(s),c=a("5fdcf1aea784583ca083"),f=n(c),d=a("33a776824bec073629e5"),p=n(d),h=a("b13eefde5dd7af09b834"),b=n(h),m=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"initOptions",value:function(){f.default.render(p.default.createElement(b.default,{imageUploadUrl:this.imageUploadUrl,imageDownloadUrl:this.imageDownloadUrl,dataSource:this.dataSource,dataAnswer:this.dataAnswer}),document.getElementById("question-options"))}}]),t}(l.default);t.default=m},"7fed9bfb1a62b2d3ee74":function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a("fed3b995e613c074e80b"),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.initTitleEditor(a.validator),a.initAnalysisEditor(),a.answerFieldId="question-answer-field",a.$answerField=$("#"+a.answerFieldId),a.init(),a}return r(t,e),i(t,[{key:"init",value:function(){var e=this;this.$answerField.rules("add",{required:!0});var t=CKEDITOR.replace(this.answerFieldId,{toolbar:"Minimal",filebrowserImageUploadUrl:this.$answerField.data("imageUploadUrl"),height:this.$answerField.height()});t.on("change",function(){e.$answerField.val(t.getData())}),t.on("blur",function(){e.$answerField.val(t.getData())})}}]),t}(s.default);t.default=l},b13eefde5dd7af09b834:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,a,n,o){var r={optionId:Math.random().toString().replace(".",""),optionLabel:Translator.trans("activity.testpaper_manage.question_options")+(0,_.numberConvertLetter)(n),inputValue:t,checked:o};a.Options[r.optionId]=t.length>0?1:0,o&&(a.checkedNum+=1),e.push(r)}function s(e,t,a){for(var n=0;n<e.length;n++)e[n].optionId==a?(e[n].checked&&(t.checkedNum=0),e.splice(n,1),delete t.Options[a],n--):e[n].optionLabel=Translator.trans("activity.testpaper_manage.question_options")+(0,_.numberConvertLetter)(n+1)}function l(e,t,a,n,o){var r=0;e.map(function(t,i){o?t.optionId!=a||n?n||(e[i].checked=!1):e[i].checked=!0:t.optionId==a&&(e[i].checked=!n),e[i].checked&&r++}),t.checkedNum=r}function c(e,t,a,n){e.map(function(t,o){t.optionId==a&&(e[o].inputValue=n)})}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a("33a776824bec073629e5"),p=n(d),h=a("e7f6be29a6dce7725ed1"),b=n(h),m=a("b334fd7e4c5a19234db2"),y=n(m),v=a("ae88c18278ce1387fd20"),g=n(v),_=a("3c398f87808202f19beb"),w=function(e){function t(e){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={dataSource:[],isValidator:!1},a.validatorDatas={checkedNum:0,Options:{}};var n=a.props.dataSource,i=a.props.dataAnswer;if(n.length>0)n.map(function(e,t){for(var n=!1,o=0;o<i.length;o++)t==i[o]&&(n=!0);u(a.state.dataSource,e,a.validatorDatas,t+1,n)});else for(var s=1;s<=a.props.defaultNum;s++)u(a.state.dataSource,"",a.validatorDatas,s,!1);return a.subscriptionMessage(),a}return i(t,e),f(t,[{key:"subscriptionMessage",value:function(){var e=this;g.default.subscribe({channel:"manage-question",topic:"question-create-form-validator-start",callback:function(t,a){e.validatorOptions(t)}})}},{key:"publishMessage",value:function(e){g.default.publish({channel:"manage-question",topic:"question-create-form-validator-end",data:{isValidator:e}})}},{key:"validatorOptions",value:function(e){var t=0;this.setState({isValidator:e.isValidator});for(var a in this.validatorDatas.Options)t+=this.validatorDatas.Options[a];t<this.state.dataSource.length||(this.validatorDatas.checkedNum<this.props.minCheckedNum?(0,y.default)("danger",Translator.trans("course.question.create.choose_min_answer_num_hint",{minCheckedNum:this.props.minCheckedNum})):this.publishMessage(!0))}},{key:"addOption",value:function(){if(this.state.dataSource.length>=this.props.maxNum)return void(0,y.default)("danger",Translator.trans("course.question.create.choose_max_num_hint",{maxNum:this.props.maxNum}));u(this.state.dataSource,"",this.validatorDatas,this.state.dataSource.length+1,!1),this.setState({dataSource:this.state.dataSource})}},{key:"changeOptionChecked",value:function(e,t){l(this.state.dataSource,this.validatorDatas,e,t,this.props.isRadio),this.setState({dataSource:this.state.dataSource}),this.validatorDatas.checkedNum<=0&&this.publishMessage(!1)}},{key:"deleteOption",value:function(e){if(this.state.dataSource.length<=this.props.minNum)return void(0,y.default)("danger",Translator.trans("course.question.create.choose_min_num_hint",{minNum:this.props.minNum}));s(this.state.dataSource,this.validatorDatas,e),this.setState({dataSource:this.state.dataSource})}},{key:"updateInputValue",value:function(e,t){c(this.state.dataSource,this.validatorDatas,e,t),this.validatorDatas.Options[e]=t.length>0?1:0,t.length<=0&&this.publishMessage(!1),this.setState({dataSource:this.state.dataSource})}},{key:"render",value:function(){var e=this,t=Translator.trans("course.question.create_hint");return p.default.createElement("div",{className:"question-options-group"},this.state.dataSource.map(function(t,a){return p.default.createElement(b.default,{imageUploadUrl:e.props.imageUploadUrl,imageDownloadUrl:e.props.imageDownloadUrl,isRadio:e.props.isRadio,publishMessage:function(t){return e.publishMessage(t)},validatorDatas:e.validatorDatas,isValidator:e.state.isValidator,datas:t,key:a,index:a,deleteOption:function(t){return e.deleteOption(t)},changeOptionChecked:function(t,a){return e.changeOptionChecked(t,a)},updateInputValue:function(t,a){return e.updateInputValue(t,a)}})}),p.default.createElement("div",{className:"form-group"},p.default.createElement("div",{className:"col-md-8 col-md-offset-2"},p.default.createElement("a",{className:"btn btn-success btn-sm pull-right",onClick:function(){return e.addOption()}},t))))}}]),t}(d.Component);t.default=w,w.defaultProps={defaultNum:4,maxNum:10,minNum:2,isRadio:!1,minCheckedNum:1}},d10d1a490b8cc019f3a3:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=a("fed3b995e613c074e80b"),u=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.initTitleEditor(a.validator),a.initAnalysisEditor(),a}return r(t,e),t}(u.default);t.default=s},e7f6be29a6dce7725ed1:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a("33a776824bec073629e5"),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={datas:a.props.datas},a.editor=null,a.editorBody=null,a.editorHtml=null,a}return r(t,e),i(t,[{key:"componentDidMount",value:function(){this.initCkeditor()}},{key:"deleteOption",value:function(e){this.editorHtml=null,this.props.deleteOption(e.currentTarget.attributes["data-option-id"].value)}},{key:"onChangeChecked",value:function(e){this.updateInputValue(this.editor.getData()),this.props.changeOptionChecked(e.currentTarget.attributes["data-option-id"].value,this.props.datas.checked)}},{key:"initCkeditor",value:function(e){if(this.editor)this.editor.setData(datas.inputValue);else{this.editor=CKEDITOR.replace(this.props.datas.optionId,{toolbar:"Minimal",filebrowserImageUploadUrl:this.props.imageUploadUrl,height:120});var t=this;this.editor.on("instanceReady",function(){t.editorBody=$("#"+[t.props.datas.optionId]).parent().find("iframe").contents().find("body")}),this.editor.on("change",function(){setTimeout(function(){t.updateInputValue(t.editor.getData())},100)}),this.editor.on("blur",function(){setTimeout(function(){t.updateInputValue(t.editor.getData())},100)})}}},{key:"updateInputValue",value:function(e){this.editorHtml=e,this.props.updateInputValue(this.props.datas.optionId,e)}},{key:"render",value:function(){var e=this,t=this.props.isValidator&&this.props.datas.inputValue.length<=0,a="checkbox";this.props.isRadio&&(a="radio"),this.editorBody&&this.editorHtml!=this.props.datas.inputValue&&this.editorBody.html(this.props.datas.inputValue);var n=Translator.trans("course.question.right_answer_hint");return s.default.createElement("div",{className:"form-group"},s.default.createElement("div",{className:"col-sm-2 control-label"},s.default.createElement("label",{className:"choice-label control-label-required"},this.props.datas.optionLabel)),s.default.createElement("div",{className:"col-sm-8 controls"},s.default.createElement("textarea",{className:"form-control datas-input col-md-8",id:this.props.datas.optionId,defaultValue:this.props.datas.inputValue,name:"choices[]",value:this.props.datas.inputValue,"data-image-upload-url":this.props.imageUploadUrl,"data-image-download-url":this.props.imageDownloadUrl}),s.default.createElement("div",{className:"mtm"},s.default.createElement("label",null,s.default.createElement("input",{type:a,name:"answer[]","data-option-id":this.props.datas.optionId,value:this.props.index,checked:this.props.datas.checked,className:"answer-checkbox",onChange:function(t){return e.onChangeChecked(t)}})," ",n)),s.default.createElement("p",{className:t?"color-danger":"hidden"},Translator.trans("course.question.right_answer_content_hint"))),s.default.createElement("div",{className:"col-sm-2"},s.default.createElement("a",{className:"btn btn-default btn-sm","data-option-id":this.props.datas.optionId,onClick:function(t){return e.deleteOption(t)},href:"javascript:;"},s.default.createElement("i",{className:"glyphicon glyphicon-trash"}))))}}]),t}(u.Component);t.default=l},e85a87f5cf404e5d12c1:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a("2cf47b8094e4851a7f1f"),l=n(s),c=a("5fdcf1aea784583ca083"),f=n(c),d=a("33a776824bec073629e5"),p=n(d),h=a("b13eefde5dd7af09b834"),b=n(h),m=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"initOptions",value:function(){f.default.render(p.default.createElement(b.default,{imageUploadUrl:this.imageUploadUrl,imageDownloadUrl:this.imageDownloadUrl,dataSource:this.dataSource,dataAnswer:this.dataAnswer,isRadio:!0}),document.getElementById("question-options"))}}]),t}(l.default);t.default=m},fed3b995e613c074e80b:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a("d5fb0e67d2d4c1ebaaed"),i=function(e){return e&&e.__esModule?e:{default:e}}(r),u=function(){function e(t){n(this,e),this.$form=t,this.titleFieldId="question-stem-field",this.analysisFieldId="question-analysis-field",this.validator=null,this.titleEditorToolBarName="Minimal",this._init(),this.attachmentActions=new i.default(t)}return o(e,[{key:"_init",value:function(){this._initEvent(),this._initValidate()}},{key:"_initEvent",value:function(){var e=this;this.$form.on("click","[data-role=submit]",function(t){return e.submitForm(t)})}},{key:"submitForm",value:function(e){var t=$(e.currentTarget).data("submission");this.$form.find("[name=submission]").val(t);var a=this;this.validator.form()&&($(e.currentTarget).button("loading"),a.$form.submit())}},{key:"_initValidate",value:function(){var e=this.$form.validate({onkeyup:!1,rules:{'[data-role="target"]':{required:!0},difficulty:{required:!0},stem:{required:!0},score:{required:!0,number:!0,max:999,min:0,es_score:!0}},messages:{'[data-role="target"]':Translator.trans("course.question.create.belong_required_error_hint"),difficulty:Translator.trans("course.question.create.difficulty_required_error_hint")}});this.validator=e}},{key:"initTitleEditor",value:function(e){var t=$("#"+this.titleFieldId),a=CKEDITOR.replace(this.titleFieldId,{toolbar:this.titleEditorToolBarName,filebrowserImageUploadUrl:t.data("imageUploadUrl"),height:t.height()});a.on("change",function(){t.val(a.getData()),e.form()}),a.on("blur",function(){t.val(a.getData()),e.form()})}},{key:"initAnalysisEditor",value:function(){var e=$("#"+this.analysisFieldId),t=CKEDITOR.replace(this.analysisFieldId,{toolbar:this.titleEditorToolBarName,filebrowserImageUploadUrl:e.data("imageUploadUrl"),height:e.height()});t.on("change",function(){e.val(t.getData())})}},{key:"titleEditorToolBarName",set:function(e){this._titleEditorToolBarName=e},get:function(){return this._titleEditorToolBarName}}]),e}();t.default=u}},["56f8edb912e68ea9e223"]);